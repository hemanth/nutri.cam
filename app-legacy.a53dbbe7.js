(function(e){function t(t){for(var r,a,i=t[0],s=t[1],d=t[2],l=0,f=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==c[s]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/veganscan/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1d54":function(e,t,n){"use strict";n("c770")},"3aa8":function(e,t,n){"use strict";n("5378")},5378:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function c(e,t,n,c,o,a){var i=Object(r["j"])("CameraView"),s=Object(r["j"])("ProductView");return Object(r["f"])(),Object(r["c"])(r["a"],null,[Object(r["e"])(i,{onCode:c.receivedCode},null,8,["onCode"]),Object(r["e"])(s,{code:c.code,panelHidden:c.panelHidden},null,8,["code","panelHidden"])],64)}var o=n("da22"),a=n.n(o),i=Object(r["l"])("data-v-7796e62c");Object(r["h"])("data-v-7796e62c");var s={ref:"video"},d={key:0,class:"fixed top-0 right-0 p-4"},u=Object(r["e"])("img",{src:a.a,class:"h-6 w-6"},null,-1);Object(r["g"])();var l=i((function(e,t,n,c,o,a){return Object(r["f"])(),Object(r["c"])(r["a"],null,[Object(r["e"])("video",s,null,512),o.cams>1?(Object(r["f"])(),Object(r["c"])("div",d,[Object(r["e"])("div",{class:"bg-white rounded-full shadow-md p-2",onClick:t[1]||(t[1]=function(){return a.changeCamera.apply(a,arguments)})},[u])])):Object(r["d"])("",!0)],64)})),f=(n("7db0"),n("e588")),p={data:function(){return{codeReader:void 0,camIndex:0,cams:0}},mounted:function(){var e=localStorage.getItem("camid");this.setupScanner(e)},methods:{setupScanner:function(e){var t=this;this.codeReader=new f["BrowserMultiFormatReader"],this.codeReader.listVideoInputDevices().then((function(n){var r;r=n.find((function(t){return t.deviceId===e}))?e:n[t.camIndex].deviceId,t.cams=n.length,localStorage.setItem("camid",r),t.codeReader.decodeFromVideoDevice(r,t.$refs.video,(function(e,n){e&&t.$emit("code",e.text),!n||n instanceof f["NotFoundException"]||console.error(n)}))})).catch((function(e){console.error(e)}))},changeCamera:function(){console.log(this.codeReader),this.codeReader.reset(),this.camIndex++,this.camIndex>=this.cams&&(this.camIndex=0),this.setupScanner()}}};n("3aa8");p.render=l,p.__scopeId="data-v-7796e62c";var b=p,v=(n("a4d3"),n("e01a"),Object(r["l"])("data-v-1bca4978"));Object(r["h"])("data-v-1bca4978");var g={key:0,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},h=Object(r["e"])("h2",{class:"text-3xl mb-1"},"Fehler",-1),j={key:1,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},O={class:"flex"},m={class:"flex-1"},w={class:"text-3xl mb-1"};Object(r["g"])();var k=v((function(e,t,n,c,o,a){return Object(r["f"])(),Object(r["c"])("div",{class:["panel",{gone:n.panelHidden,"overflow-hidden":o.loading}]},[o.error?(Object(r["f"])(),Object(r["c"])("div",g,[h,Object(r["e"])("p",null,Object(r["k"])(o.error),1)])):Object(r["d"])("",!0),o.loading?(Object(r["f"])(),Object(r["c"])("div",j,[Object(r["e"])("p",null,"Loading "+Object(r["k"])(n.code)+"...",1)])):Object(r["d"])("",!0),Object(r["e"])("div",O,[Object(r["e"])("div",m,[Object(r["e"])("h2",w,Object(r["k"])(o.title),1),Object(r["e"])("p",null,[Object(r["e"])("span",{innerHTML:o.description},null,8,["innerHTML"]),Object(r["e"])("a",{href:"https://world.openfoodfacts.org/product/".concat(n.code),target:"_blank"}," Auf OpenFoodFacts einsehen... ",8,["href"])])]),Object(r["e"])("div",null,[Object(r["e"])("img",{src:e.image,class:"h-16"},null,8,["src"])])])],2)})),x=(n("caad"),n("d3b7"),n("ac1f"),n("2532"),n("5319"),n("ddb0"),n("96cf"),n("1da1")),y={props:{panelHidden:Boolean,code:String},data:function(){return{isVegan:void 0,title:"",description:"",type:"",loading:!1,error:!1}},watch:{code:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var n,r,c,o,a,i,s,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.prev=3,t.next=6,fetch("https://world.openfoodfacts.org/api/v0/product/".concat(e.code,".json")).then((function(e){return e.json()}));case 6:if(n=t.sent,"product found"===n.status_verbose){t.next=9;break}throw new Error("Wir konnten das Produkt nicht finden.");case 9:r={"en:vegan":"vegan","en:vegetarian":"vegetarisch (nicht vegan)","en:vegetarian-status-unknown":"nicht sicher vegetarisch","en:vegan-status-unknown":"nicht sicher vegan","en:non-vegan":"nicht vegan"},c={labels_tags:"Das Produkt ist als <strong>$</strong> gekennzeichnet.",ingredients_analysis_tags:"Die automatische Zutatenanalyse ergab, dass das Produkt <strong>$</strong> ist."},o=!1,t.t0=regeneratorRuntime.keys(c);case 13:if((t.t1=t.t0()).done){t.next=29;break}a=t.t1.value,i=c[a],t.t2=regeneratorRuntime.keys(r);case 17:if((t.t3=t.t2()).done){t.next=27;break}if(s=t.t3.value,d=r[s],!n.product[a].includes(s)){t.next=25;break}return e.description=i.replace("$",d),o=!0,e.type=d,t.abrupt("break",29);case 25:t.next=17;break;case 27:t.next=13;break;case 29:if(o){t.next=31;break}throw new Error("Wir konnten das Produkt nicht einstufen.");case 31:e.title=n.product.product_name_de,e.image=n.product.image_thumb_url,t.next=39;break;case 35:t.prev=35,t.t4=t["catch"](3),console.log(t.t4),e.error=t.t4.message;case 39:return t.prev=39,e.loading=!1,t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[3,35,39,42]])})))()}}};n("ec14");y.render=k,y.__scopeId="data-v-1bca4978";var _=y,P=n("84a2"),I=n.n(P),S={name:"App",components:{CameraView:b,ProductView:_},setup:function(){var e=Object(r["i"])(!0),t=Object(r["i"])(0);function n(n){e.value=!1,t.value=n}var c=I()(n,1e3);return{receivedCode:c,code:t,panelHidden:e}}};n("1d54");S.render=c;var R=S,C=n("9483");Object(C["a"])("".concat("/veganscan/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Object(r["b"])(R).mount("#app")},ad89:function(e,t,n){},c770:function(e,t,n){},da22:function(e,t,n){e.exports=n.p+"img/camera-flip.824534fa.svg"},ec14:function(e,t,n){"use strict";n("ad89")}});
//# sourceMappingURL=app-legacy.a53dbbe7.js.map