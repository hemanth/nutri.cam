(function(e){function t(t){for(var o,a,i=t[0],s=t[1],d=t[2],u=0,f=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==c[s]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},c={app:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/veganscan/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1d54":function(e,t,n){"use strict";n("c770")},"3aa8":function(e,t,n){"use strict";n("5378")},5378:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var o=n("7a23");function c(e,t,n,c,r,a){const i=Object(o["j"])("CameraView"),s=Object(o["j"])("ProductView");return Object(o["f"])(),Object(o["c"])(o["a"],null,[Object(o["e"])(i,{onCode:c.receivedCode},null,8,["onCode"]),Object(o["e"])(s,{code:c.code,panelHidden:c.panelHidden},null,8,["code","panelHidden"])],64)}n("ddb0");var r=n("da22"),a=n.n(r);const i=Object(o["l"])("data-v-7796e62c");Object(o["h"])("data-v-7796e62c");const s={ref:"video"},d={key:0,class:"fixed top-0 right-0 p-4"},l=Object(o["e"])("img",{src:a.a,class:"h-6 w-6"},null,-1);Object(o["g"])();const u=i((function(e,t,n,c,r,a){return Object(o["f"])(),Object(o["c"])(o["a"],null,[Object(o["e"])("video",s,null,512),r.cams>1?(Object(o["f"])(),Object(o["c"])("div",d,[Object(o["e"])("div",{class:"bg-white rounded-full shadow-md p-2",onClick:t[1]||(t[1]=(...e)=>a.changeCamera(...e))},[l])])):Object(o["d"])("",!0)],64)}));var f=n("e588"),p={data(){return{codeReader:void 0,camIndex:0,cams:0}},mounted(){const e=localStorage.getItem("camid");this.setupScanner(e)},methods:{setupScanner(e){this.codeReader=new f["BrowserMultiFormatReader"],this.codeReader.listVideoInputDevices().then(t=>{let n;n=t.find(t=>t.deviceId===e)?e:t[this.camIndex].deviceId,this.cams=t.length,localStorage.setItem("camid",n),this.codeReader.decodeFromVideoDevice(n,this.$refs.video,(e,t)=>{e&&this.$emit("code",e.text),!t||t instanceof f["NotFoundException"]||console.error(t)})}).catch(e=>{console.error(e)})},changeCamera(){console.log(this.codeReader),this.codeReader.reset(),this.camIndex++,this.camIndex>=this.cams&&(this.camIndex=0),this.setupScanner()}}};n("3aa8");p.render=u,p.__scopeId="data-v-7796e62c";var h=p;const b=Object(o["l"])("data-v-1bca4978");Object(o["h"])("data-v-1bca4978");const g={key:0,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},v=Object(o["e"])("h2",{class:"text-3xl mb-1"},"Fehler",-1),j={key:1,class:"flex absolute inset-0 justify-center text-center flex-col bg-white"},O={class:"flex"},m={class:"flex-1"},w={class:"text-3xl mb-1"};Object(o["g"])();const y=b((function(e,t,n,c,r,a){return Object(o["f"])(),Object(o["c"])("div",{class:["panel",{gone:n.panelHidden,"overflow-hidden":r.loading}]},[r.error?(Object(o["f"])(),Object(o["c"])("div",g,[v,Object(o["e"])("p",null,Object(o["k"])(r.error),1)])):Object(o["d"])("",!0),r.loading?(Object(o["f"])(),Object(o["c"])("div",j,[Object(o["e"])("p",null,"Loading "+Object(o["k"])(n.code)+"...",1)])):Object(o["d"])("",!0),Object(o["e"])("div",O,[Object(o["e"])("div",m,[Object(o["e"])("h2",w,Object(o["k"])(r.title),1),Object(o["e"])("p",null,[Object(o["e"])("span",{innerHTML:r.description},null,8,["innerHTML"]),Object(o["e"])("a",{href:"https://world.openfoodfacts.org/product/"+n.code,target:"_blank"}," Auf OpenFoodFacts einsehen... ",8,["href"])])]),Object(o["e"])("div",null,[Object(o["e"])("img",{src:e.image,class:"h-16"},null,8,["src"])])])],2)}));n("5319");var x={props:{panelHidden:Boolean,code:String},data(){return{isVegan:void 0,title:"",description:"",type:"",loading:!1,error:!1}},watch:{async code(){if(!this.loading){this.loading=!0;try{const e=await fetch(`https://world.openfoodfacts.org/api/v0/product/${this.code}.json`).then(e=>e.json());if("product found"!==e.status_verbose)throw new Error("Wir konnten das Produkt nicht finden.");const t={"en:vegan":"vegan","en:vegetarian":"vegetarisch (nicht vegan)","en:vegetarian-status-unknown":"nicht sicher vegetarisch","en:vegan-status-unknown":"nicht sicher vegan","en:non-vegan":"nicht vegan"},n={labels_tags:"Das Produkt ist als <strong>$</strong> gekennzeichnet.",ingredients_analysis_tags:"Die automatische Zutatenanalyse ergab, dass das Produkt <strong>$</strong> ist."};let o=!1;e:for(const c in n){const r=n[c];for(const n in t){const a=t[n];if(e.product[c].includes(n)){this.description=r.replace("$",a),o=!0,this.type=a;break e}}}if(!o)throw new Error("Wir konnten das Produkt nicht einstufen.");this.title=e.product.product_name_de,this.image=e.product.image_thumb_url}catch(e){console.log(e),this.error=e.message}finally{this.loading=!1}}}}};n("ec14");x.render=y,x.__scopeId="data-v-1bca4978";var k=x,_=n("84a2"),P=n.n(_),I={name:"App",components:{CameraView:h,ProductView:k},setup(){const e=Object(o["i"])(!0),t=Object(o["i"])(0);function n(n){e.value=!1,t.value=n}const c=P()(n,1e3);return{receivedCode:c,code:t,panelHidden:e}}};n("1d54");I.render=c;var S=I,C=n("9483");Object(C["a"])("/veganscan/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),Object(o["b"])(S).mount("#app")},ad89:function(e,t,n){},c770:function(e,t,n){},da22:function(e,t,n){e.exports=n.p+"img/camera-flip.824534fa.svg"},ec14:function(e,t,n){"use strict";n("ad89")}});
//# sourceMappingURL=app.4a3fac9c.js.map